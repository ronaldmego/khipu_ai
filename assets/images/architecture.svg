<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="800" height="600" fill="#f8f9fa"/>
    
    <!-- Title -->
    <text x="400" y="40" text-anchor="middle" font-size="24" font-weight="bold">Khipu AI Architecture</text>

    <!-- Frontend Layer -->
    <g transform="translate(0, 80)">
        <rect x="100" y="20" width="600" height="100" rx="10" fill="#e6f3ff" stroke="#333"/>
        <text x="400" y="45" text-anchor="middle" font-weight="bold">Frontend Layer</text>
        <!-- Components -->
        <rect x="150" y="60" width="150" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="225" y="85" text-anchor="middle">Streamlit UI</text>
        <rect x="500" y="60" width="150" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="575" y="85" text-anchor="middle">UI Components</text>
    </g>

    <!-- Service Layer -->
    <g transform="translate(0, 220)">
        <rect x="100" y="20" width="600" height="120" rx="10" fill="#fff3e6" stroke="#333"/>
        <text x="400" y="45" text-anchor="middle" font-weight="bold">Service Layer</text>
        <!-- Services -->
        <rect x="150" y="60" width="150" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="225" y="85" text-anchor="middle">Data Processing</text>
        <rect x="325" y="60" width="150" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="400" y="85" text-anchor="middle">RAG Service</text>
        <rect x="500" y="60" width="150" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="575" y="85" text-anchor="middle">State Management</text>
    </g>

    <!-- Utils Layer -->
    <g transform="translate(0, 380)">
        <rect x="100" y="20" width="600" height="120" rx="10" fill="#e6ffe6" stroke="#333"/>
        <text x="400" y="45" text-anchor="middle" font-weight="bold">Utility Layer</text>
        <!-- Utils -->
        <rect x="120" y="60" width="120" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="180" y="85" text-anchor="middle">Database</text>
        <rect x="260" y="60" width="120" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="320" y="85" text-anchor="middle">RAG Utils</text>
        <rect x="400" y="60" width="120" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="460" y="85" text-anchor="middle">LLM Provider</text>
        <rect x="540" y="60" width="120" height="40" rx="5" fill="#fff" stroke="#333"/>
        <text x="600" y="85" text-anchor="middle">Chatbot</text>
    </g>

    <!-- External Layer -->
    <g transform="translate(0, 540)">
        <rect x="100" y="0" width="600" height="40" rx="10" fill="#ffe6e6" stroke="#333"/>
        <text x="400" y="25" text-anchor="middle" font-weight="bold">External Services (MySQL, Vector Store, LLM Models)</text>
    </g>

    <!-- Arrows -->
    <g stroke="#666" fill="none" marker-end="url(#arrow)">
        <!-- Frontend to Service -->
        <path d="M400,180 L400,220" stroke-width="2"/>
        <!-- Service to Utils -->
        <path d="M400,340 L400,380" stroke-width="2"/>
        <!-- Utils to External -->
        <path d="M400,500 L400,540" stroke-width="2"/>
    </g>

    <!-- Arrow Marker -->
    <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
        </marker>
    </defs>
</svg>